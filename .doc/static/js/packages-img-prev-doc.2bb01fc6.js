(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"./packages/img-prev/doc.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=n("react"),s=n.n(i),r=n("./node_modules/@mdx-js/react/dist/index.es.js"),l=n("./node_modules/father/node_modules/docz/dist/index.esm.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),m=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),d=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),b=n("./packages/img-prev/node_modules/classnames/index.js"),g=n.n(b),h=n("./packages/img-prev/src/style.less"),v=n.n(h),f={open:"open",closing:"closing",closed:"closed"},y="data-privew-index",_=500,k=50,w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).keyboardListener=function(e){var t={add:"addEventListener",remove:"removeEventListener"}[e];t&&document[t]("keydown",n.keyboardEvent)},n.keyboardEvent=function(e){switch(e.keyCode){case 27:return n.previewClose();case 38:return n.scaleBtnClick(1)();case 40:return n.scaleBtnClick(-1)();case 37:return n.swtichPreviewingImg(-1)();case 39:return n.swtichPreviewingImg(1)();case 32:return n.rotateImg()}},n.caputreImgs=function(){var e=n.previewDom.current,t=n.imgDomsFactory(e.getElementsByTagName("img"));n.setState({imgs:t})},n.caputreImgsClick=function(e){var t=e.target,a=t.getAttribute(y);if("img"===t.tagName.toLowerCase()&&"string"===typeof a){var i=Number(a);n.setState({previewOpen:f.open,index:i}),n.listenMouseWhell(),n.keyboardListener("add")}},n.bindImgTagClick=function(){n.previewDom.current.addEventListener("click",n.caputreImgsClick)},n.imgDomsFactory=function(e){var t=0,a=[],i=n.props.ignoreAttrName,s=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var m=o.value;m.getAttribute(i)||(m.setAttribute(y,t),a.push(m),t+=1)}}catch(d){r=!0,l=d}finally{try{s||null==c.return||c.return()}finally{if(r)throw l}}return a},n.imgScaleStyle=function(){var e=n.state,t=e.mouseWheelValue,a=e.imgRotate;return{transform:"scale(".concat(1+t*(k/_)/100,") rotate(").concat(a,"deg)")}},n.previewClose=function(e){if(!e||e.target===e.currentTarget){var t=n.props.maskClose,a=void 0===t||t;n.keyboardListener("remove"),a&&n.setState({previewOpen:f.closing},(function(){setTimeout((function(){return n.setState({previewOpen:f.closed})}),300)}))}},n.listenMouseWhell=function(e){if(e){if(n.wheelTimer)return!1;var t=e.nativeEvent,a=t.wheelDeltaY,i=t.deltaY;n.wheelTimer=setTimeout((function(){var e=n.state.mouseWheelValue+(a||-i);n.refreshWheelValue(e),n.wheelTimer=null}),300)}},n.scaleBtnClick=function(e){return function(){var t=n.state.mouseWheelValue;n.refreshWheelValue(t+_/5*e)}},n.refreshWheelValue=function(e){var t=e>0?1:-1;Math.abs(e)>_&&(e=_*t),n.setState({mouseWheelValue:e})},n.swtichPreviewingImg=function(e){return function(){var t=n.state,a=t.index,i=t.imgs,s=a+e;s<i.length&&s>=0&&n.setState({index:a+e,imgRotate:0,mouseWheelValue:0})}},n.rotateImg=function(){if(n.rotateTimer)return!1;n.rotateTimer=setTimeout((function(){n.setState({imgRotate:n.state.imgRotate+90}),n.rotateTimer=null}),300)},n.controllBarRender=function(){return n.props.showControllBar?s.a.createElement("div",{className:v.a.controlBar},s.a.createElement("i",{className:"bingo bingo-minus",onClick:n.scaleBtnClick(-1)}),s.a.createElement("i",{className:"bingo bingo-add",onClick:n.scaleBtnClick(1)}),s.a.createElement("i",{className:"bingo bingo-refresh",onClick:n.rotateImg}),s.a.createElement("i",{className:"bingo bingo-left-arrow",onClick:n.swtichPreviewingImg(-1)}),s.a.createElement("i",{className:"bingo bingo-right-arrow",onClick:n.swtichPreviewingImg(1)})):null},n.previewDom=Object(i.createRef)(),n.state={index:0,previewOpen:f.closed,mouseWheelValue:0,imgRotate:0},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.caputreImgs(),this.bindImgTagClick()}},{key:"componentWillUnmount",value:function(){this.previewDom.current.removeEventListener("click",this.caputreImgsClick)}},{key:"render",value:function(){var e=this.state,t=e.previewOpen,n=e.imgs,a=e.index,i=this.props,r=i.children,l=i.className,c=i.style,m=void 0===c?{}:c,d=i.maskClassName,u=i.maskStyle,p=void 0===u?{}:u,b=i.allowMaskClose;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:l,style:m,ref:this.previewDom},r instanceof Function?r(this.caputreImgs):r),f[t]!==f.closed&&s.a.createElement("div",{className:g()(v.a.imgPriviewMask,v.a.blackMask,d,Object(o.a)({},v.a.maskClosing,t===f.closing)),style:p,onClick:b&&this.previewClose},s.a.createElement("img",{onWheel:this.listenMouseWhell,className:v.a.targetImg,style:this.imgScaleStyle(),src:n[a].src,alt:n[a].src}),this.controllBarRender(),s.a.createElement("i",{className:g()(v.a.closedIcon,"bingo bingo-closed"),onClick:this.previewClose})))}}]),t}(i.PureComponent);"undefined"!==typeof w&&w&&w===Object(w)&&Object.isExtensible(w)&&Object.defineProperty(w,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ImgsPreview",filename:"packages\\img-prev\\src\\index.js"}}),w.defaultProps={ignoreAttrName:"",children:null,className:"",style:{},maskClassName:"",maskStyle:{},allowMaskClose:!0,showControllBar:!0},n.d(t,"default",(function(){return O}));var j={},C="wrapper";function O(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)(C,Object.assign({},j,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"\u56fe\u7247\u9884\u89c8\u7ec4\u4ef6"},"\u56fe\u7247\u9884\u89c8\u7ec4\u4ef6"),Object(r.b)("br",null),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"\u76ee\u5f55\uff1a"),"\npackages/img-prev"),Object(r.b)("br",null),Object(r.b)("p",null,"\u4f7f\u7528\u65b9\u5f0f"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{}),"yarn add @bingo/img-prev\n\u6216\nnpm install @bingo/img-prev\n")),Object(r.b)("br",null),Object(r.b)("h2",{id:"demo"},"Demo"),Object(r.b)(l.Playground,{__position:3,__code:'<ImgsPreview\n  ignoreAttrName="data-ignore"\n  style={{\n    display: \'flex\',\n    alignItems: \'flex-start\',\n  }}\n>\n  <div style={{ display: \'inline-block\' }}>\n    <img\n      width="300"\n      height="200"\n      src="http://t9.baidu.com/it/u=583874135,70653437&fm=79&app=86&f=JPEG?w=3607&h=2408"\n      data-ignore="1"\n    />\n    <p>\u6211\u662f\u5e26\u6709ignoreAttrName\u6807\u8bc6\uff0c\u65e0\u6cd5\u9884\u89c8</p>\n  </div>\n  <div style={{ display: \'inline-block\' }}>\n    <img\n      width="300"\n      height="200"\n      src="http://attach.bbs.miui.com/forum/201304/25/195151szk8umd8or8fmfa5.jpg"\n    />\n  </div>\n  <div style={{ display: \'inline-block\' }}>\n    <img\n      width="300"\n      height="200"\n      src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581183988008&di=d132c07088a65668e8ddb0818758a311&imgtype=0&src=http%3A%2F%2Ft8.baidu.com%2Fit%2Fu%3D2247852322%2C986532796%26fm%3D79%26app%3D86%26f%3DJPEG%3Fw%3D1280%26h%3D853"\n    />\n  </div>\n</ImgsPreview>',__scope:{props:this?this.props:n,Playground:l.Playground,Props:l.Props,ImgsPreview:w},__codesandbox:"undefined",inCenter:!0,mdxType:"Playground"},Object(r.b)(w,{ignoreAttrName:"data-ignore",style:{display:"flex",alignItems:"flex-start"},mdxType:"ImgsPreview"},Object(r.b)("div",{style:{display:"inline-block"}},Object(r.b)("img",{width:"300",height:"200",src:"http://t9.baidu.com/it/u=583874135,70653437&fm=79&app=86&f=JPEG?w=3607&h=2408","data-ignore":"1"}),Object(r.b)("p",null,"\u6211\u662f\u5e26\u6709ignoreAttrName\u6807\u8bc6\uff0c\u65e0\u6cd5\u9884\u89c8")),Object(r.b)("div",{style:{display:"inline-block"}},Object(r.b)("img",{width:"300",height:"200",src:"http://attach.bbs.miui.com/forum/201304/25/195151szk8umd8or8fmfa5.jpg"})),Object(r.b)("div",{style:{display:"inline-block"}},Object(r.b)("img",{width:"300",height:"200",src:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1581183988008&di=d132c07088a65668e8ddb0818758a311&imgtype=0&src=http%3A%2F%2Ft8.baidu.com%2Fit%2Fu%3D2247852322%2C986532796%26fm%3D79%26app%3D86%26f%3DJPEG%3Fw%3D1280%26h%3D853"})))),Object(r.b)("h2",{id:"props"},"Props"),Object(r.b)(l.Props,{of:w,mdxType:"Props"}))}O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"packages\\img-prev\\doc.mdx"}}),O.isMDXComponent=!0},"./packages/img-prev/src/style.less":function(e,t,n){e.exports={"img-priview__mask":"style_img-priview__mask__2-98m",imgPriviewMask:"style_img-priview__mask__2-98m",fadeIn:"style_fadeIn__2RKCv","black-mask":"style_black-mask__26Y8y",blackMask:"style_black-mask__26Y8y","mask-closing":"style_mask-closing__9CVN0",maskClosing:"style_mask-closing__9CVN0",fadeOut:"style_fadeOut__4hF3b","target-img":"style_target-img__2qjcR",targetImg:"style_target-img__2qjcR","control-bar":"style_control-bar__1SlfU",controlBar:"style_control-bar__1SlfU","closed-icon":"style_closed-icon__CVoSr",closedIcon:"style_closed-icon__CVoSr"}}}]);